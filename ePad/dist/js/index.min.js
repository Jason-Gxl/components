!function e(t,a,i){function n(s,o){if(!a[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[s]={exports:{}};t[s][0].call(d.exports,function(e){var a=t[s][1][e];return n(a||e)},d,d.exports,e,t,a,i)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t,a){!function(){"use strict";var e={circular:0,quadrate:1},t=null,a=null;function i(e){this.name=e.name||"Eraser",this.interimBuffer=[],this.buffer=[]}i.prototype={constructor:i,active:function(){},mouseRender:function(a){var i=this;a={type:"eraser",data:[a.x,a.y,i.params.eraserSize],mode:e[i.current.name],from:i.params.id},t=a,i.mouseRender.call(i,a)},largen:function(){var e=this,a=e.params.eraserSize,i=e.mainCanvas.clientWidth,n=e.mainCanvas.clientHeight;a++,e.params.eraserSize=Math.min.apply(Math,[a,i,n]),t.data[2]=e.params.eraserSize,e.mouseRender.call(e,t)},lesser:function(){var e=this,a=e.params.eraserSize;a--,e.params.eraserSize=Math.max.apply(Math,[5,a]),t.data[2]=e.params.eraserSize,e.mouseRender.call(e,t)},bufferRender:function(t,i){if(t){var n=this,r={type:"eraser",data:[],status:1,origin:!0,mode:e[n.current.name],from:n.params.id,width:n.params.width,height:n.params.height};!i&&a?(t.ex=a.x,t.ey=a.y):(t.ex=t.x,t.ey=t.y),t.size=n.params.eraserSize,r.data.push(t),n.render(r),a=t}},render:function(){},destory:function(){this.current.mouseRender.call(this,{x:-1,y:-1})}};var n=window.vm||{};n.module=n.module||{},n.module.eraser=i,window.vm=n}()},{}],2:[function(e,t,a){!function(){"use strict";function e(e){this.name=e.name||"Ferula",this.buffer=[]}e.prototype={constructor:e,active:function(){},mouseRender:function(e){var t=this;e={type:"ferula",data:[e.x,e.y],from:t.params.id},e,t.mouseRender.call(t,e)},destory:function(){this.current.mouseRender.call(this,{x:-1,y:-1})}};var t=window.vm||{};t.module=t.module||{},t.module.ferula=e,window.vm=t}()},{}],3:[function(e,t,a){!function(){"use strict";function e(e){this.name=e.name||"Image",this.interimBuffer=[],this.buffer=[]}e.prototype={constructor:e,active:function(){},renderBuffer:function(e){var t=this;e={type:"image",data:[e],status:0,origin:!0,from:t.params.id,width:t.params.width,height:t.params.height};t.toolbarMap.image.interimBuffer.push(e)},render:function(e){if(e){var t=this,a=t.toolbarMap.image.interimBuffer.shift();if(a)do{a.status=1,a.data=[].concat.apply(a.data,e),t.toolbarMap.image.buffer.push(a),t.render(a),a=t.toolbarMap.image.interimBuffer.shift()}while(a)}},destory:function(){}};var t=window.vm||{};t.module=t.module||{},t.module.image=e,window.vm=t}()},{}],4:[function(e,t,a){!function(){"use strict";var e=window.vm||{},t=Object.prototype.toString,a=window.URL||window.webkitURL,i={},n=0,r=[],s=/(\bmobile\b|\bandroid\b)/i.test(navigator.userAgent),o=/\bfirefox\b/i.test(navigator.userAgent),l={click:s?"touchend":"click",down:s?"touchstart":"mousedown",move:s?"touchmove":"mousemove",up:s?"touchend":"mouseup",wheel:o?"DOMMouseScroll":"mousewheel"},c={leftTop:"left-top",rightTop:"right-top",rightBottom:"right-bottom",leftBottom:"left-bottom"},d={data:null,layout:"leftTop",size:"100%",fontSize:16,vertical:!1,disable:!1,wrap:document.body,autoSaveTime:10,saveImgStep:5,color:"#000",background:"#fff",eraserSize:5,ferulaSize:5,toolbars:s?["pen","line","rectangle","round","text","image","eraser","export","clear"]:["ferula","pen","line","rectangle","round","text","image","eraser","export","clear","color"]},u={rectangle:["rectstroke","rect"],line:["line","arrow"],round:["circle","roundel","ellipesstroke","ellipes"],eraser:["circular","quadrate"]},h={ferula:"教鞭",circle:"空心圆",roundel:"实心圆",ellipesstroke:"空心椭圆",rectstroke:"空心矩形",pen:"画笔",circular:"圆形橡皮擦",quadrate:"方形橡皮擦",rect:"实心矩形",ellipes:"实心椭圆",text:"文本",line:"直线",arrow:"箭头",color:"颜色",export:"导出",scissors:"截图",clear:"清空",image:"图片"},f={ferula:"icon-teach-rod",circle:"icon-round-a",roundel:"icon-round-c",ellipesstroke:"icon-ellipse-b",rectstroke:"icon-rectangle-a",pen:"icon-pen",circular:"icon-xiangpica",quadrate:"icon-rubber",rect:"icon-rectangle-c",ellipes:"icon-ellipse-a",text:"icon-font",line:"icon-line",arrow:"icon-arrow",color:"icon-colour",export:"icon-keep",scissors:"icon-screenshot",clear:"icon-empty",image:"icon-pic"},p={0:"白板",1:"文档演示"},m='\t\t<div class="pad-wrap @LAYOUT@ @DISABLED@">\t\t\t<div class="toolbar-wrap">\t\t\t\t<ul class="toolbar-list">@TOOLBARS@</ul>\t\t\t</div>\t\t\t<div class="can-wrap-outer">\t\t\t\t<div class="can-wrap">\t\t\t\t\t<input type="text" class="text-input tool-input"/>\t\t\t\t\t<canvas class="main-can">抱歉！您的浏览器版本太低，暂时不支持此白板！</canvas>\t\t\t\t\t<canvas class="buffer-can-4"></canvas>\t\t\t\t\t<canvas class="buffer-can-3"></canvas>\t\t\t\t\t<canvas class="buffer-can-2"></canvas>\t\t\t\t\t<canvas class="buffer-can-1"></canvas>\t\t\t\t</div>\t\t\t\t<div class="split-page-wrap"></div>\t\t\t</div>\t\t\t<div class="pad-tab-wrap">\t\t\t\t<ul class="pad-tab-list"></ul>\t\t\t</div>\t\t\t<input type="file" accept="image/png, image/jpeg" class="file-input tool-input"/>\t\t\t<input type="color" class="color-input tool-input"/>\t\t</div>',v='<li class="toolbar-item" title="@TITLE@"><span class="item-icon iconfont @ICONCLASS@" item="@ITEM@" level="@LEVEL@"></span>@CHILDTOOLBARS@</li>',g='<ul class="child-toolbar-list">@CHILDTOOLBARITEM@</ul>',b='\t\t<div>\t\t\t<a href="javascript:void(0);" class="pre-page-btn iconfont icon-zuofanye"></a>\t\t\t<a href="javascript:void(0);" class="next-page-btn iconfont icon-youfanye"></a>\t\t\t<span><input type="text" class="page-number-input"/>/@TOTAL@<a href="javascript:void(0);" class="go-page-btn">GO</a></span>\t\t</div>',w='<li class="toolbar-item full-screen-btn-wrap"><span class="item-icon full-screen-btn iconfont icon-enlarge" item="fullScreen"></span></li>';e.module=e.module||{};var y={addEvent:window.addEventListener?function(e,t,a,i){e.addEventListener(t,a,i||!1)}:function(e,t,a){e.attachEvent("on"+t,a)},delEvent:window.addEventListener?function(e,t,a,i){e.removeEventListener(t,a,i||!1)}:function(e,t,a){e.detachEvent("on"+t,a)},addClass:function(e,t){void 0!==e&&void 0!==t&&(new RegExp("\\b"+t+"\\b","g").test(e.className)||(e.className=e.className+" "+t))},removeClass:function(e,t){if(void 0!==e&&void 0!==t){var a=new RegExp("\\b"+t+"\\b","g");a.test(e.className)&&(e.className=e.className.replace(a,""))}},preNode:function(e){return e.previousElementSibling||e.previousSibling},nextNode:function(e){return e.nextElementSibling||e.nextSibling},css:function(e,t,a){e.style[t]=a||""}},C=function(){var e=[],a=document.createElement("DIV"),i='<div class="scroll-x-wrap pad-hide"><span class="scroll-x scroll-toolbar"></span></div>',n='<div class="scroll-y-wrap pad-hide"><span class="scroll-y scroll-toolbar"></span></div>';function r(e){if(!(this instanceof r))return new r(e);var t=this,s=!1,o="x",l={x:0,y:0},c=e.node.parentNode;t.params=e,t.events={};var d=function(r){a.innerHTML="x"===r?i:n,"x"===r?(t.xScrollObj=a.removeChild(a.firstChild),c.appendChild(t.xScrollObj),e.node.clientWidth<e.node.scrollWidth&&t.xScrollObj.classList.remove("pad-hide")):(t.yScrollObj=a.removeChild(a.firstChild),c.appendChild(t.yScrollObj),e.node.clientHeight<e.node.scrollHeight&&t.yScrollObj.classList.remove("pad-hide"))};Object.defineProperty(this,"disable",{set:function(a){(s=a)?(t.xScrollObj&&t.xScrollObj.classList.add("pad-hide"),t.yScrollObj&&t.yScrollObj.classList.add("pad-hide")):(t.xScrollObj&&e.node.clientWidth<e.node.scrollWidth&&t.xScrollObj.classList.remove("pad-hide"),t.yScrollObj&&e.node.clientHeight<e.node.scrollHeight&&t.yScrollObj.classList.remove("pad-hide"))},get:function(){return s}}),e.type?d(e.type):(d("x"),d("y"));var u=function(){var a=[].slice.call(arguments,0)[0]||window.event;if("x"===o){var i=a.x||a.clientX,n=(t.xScrollObj.clientWidth-t.xScrollObj.getElementsByClassName("scroll-toolbar")[0].offsetWidth)/e.node.scrollWidth,r={type:"x",distance:i-l.x,from:e.id,scale:n};l.x=i}else{var s=a.y||a.clientY;n=(t.yScrollObj.clientHeight-t.yScrollObj.getElementsByClassName("scroll-toolbar")[0].offsetWidth)/e.node.scrollHeight,r={type:"y",distance:s-l.y,from:e.id,scale:n};l.y=s}t.scroll(r),t.fire("scroll",r)},h=function(){y.delEvent(document,"mousemove",u),y.delEvent(document,"mouseup",h)};t.xScrollObj&&y.addEvent(t.xScrollObj.getElementsByClassName("scroll-toolbar")[0],"mousedown",function(){if(!s){var e=[].slice.call(arguments,0)[0]||window.event;l.x=e.x||e.clientX,o="x",y.addEvent(document,"mousemove",u),y.addEvent(document,"mouseup",h)}}),t.yScrollObj&&y.addEvent(t.yScrollObj.getElementsByClassName("scroll-toolbar")[0],"mousedown",function(){if(!s){var e=[].slice.call(arguments,0)[0]||window.event;l.y=e.y||e.clientY,o="y",y.addEvent(document,"mousemove",u),y.addEvent(document,"mouseup",h)}})}return r.prototype={constructor:r,scroll:function(e){var t=this.params,a="x"===e.type?this.xScrollObj:this.yScrollObj,i=a.getElementsByClassName("scroll-toolbar")[0];if(e.from===this.params.id)if("x"===e.type){var n=i.offsetLeft+e.distance;i.style.left=Math.max(0,Math.min(n,a.clientWidth-i.offsetWidth))+"px",t.node.scrollLeft=t.node.scrollLeft+e.distance/((a.clientWidth-i.offsetWidth)/t.node.offsetWidth)}else{var r=i.offsetTop+e.distance;i.style.top=Math.max(0,Math.min(r,a.clientHeight-i.offsetHeight))+"px",t.node.scrollTop=t.node.scrollTop+e.distance/((a.clientHeight-i.offsetHeight)/t.node.offsetHeight)}},resize:function(){var e=this.params;if(this.xScrollObj){var t=this.xScrollObj.getElementsByClassName("scroll-toolbar")[0],a=e.node.scrollWidth-e.node.clientWidth;t.style.width=Math.max(this.xScrollObj.clientWidth-a/10,50)+"px"}if(this.yScrollObj){var i=this.yScrollObj.getElementsByClassName("scroll-toolbar")[0],n=e.node.scrollHeight-e.node.clientHeight;i.style.height=Math.max(this.yScrollObj.clientHeight-n/10,50)+"px"}},addEvent:function(e,t){var a=this.events;a[e]?a[e].push(t):a[e]=[t]},delEvent:function(e,a){var i=this.events;"[object Function]"===t.call(a)?i[e].splice(i[e].indexOf(a),1):delete i[e]},fire:function(){var e=[].slice.call(arguments,0),a=e.shift(),i=this.events;i[a]&&i[a].forEach(function(a){"[object Function]"===t.call(a)&&a.apply(Object.create(null),e)})}},{init:function(t){if(t.node){var a=new r(t);return e.push(a),a}},resize:function(){e.forEach(function(e){e.resize()})}}}(),x={get uuid(){for(var e="";e.length<20;e+=Math.random().toString().substr(2));return e.substr(0,20)},scale:function(e){var t=e,a=t.type,i=null,n=null;switch(i&&n||(i=this.mainCanvas.width/t.width,n=this.mainCanvas.height/t.height),a){case"pen":t.data.x=t.data.x*i,t.data.y=t.data.y*n;break;case"text":t.data[0]=t.data[0]*i,t.data[1]=t.data[1]*i;break;case"image":case"file":break;case"eraser":t.data.x=t.data.x*i,t.data.y=t.data.y*n,t.data.size=t.data.size*i;break;default:t.data[0]&&(t.data[0]=isNaN(t.data[0])?t.data[0]:t.data[0]*i),t.data[1]&&(t.data[1]=isNaN(t.data[1])?t.data[1]:t.data[1]*i),t.data[2]&&(t.data[2]=isNaN(t.data[2])?t.data[2]:t.data[2]*i),t.data[3]&&(t.data[3]=isNaN(t.data[3])?t.data[3]:t.data[3]*i)}},copy:function(){var e=[].slice.call(arguments,0),a=e.shift();if(e.length)return"[object Object]"!=(s=t.call(a))&&"[object Array]"!=s?a:(e.forEach(function(e){var i=t.call(e);if("[object Object]"==i||"[object Array]"==i)if("[object Object]"===i){if("[object Array]"===o)var n={};for(var r in e){var s=e[r],o=t.call(s);n?n[r]="[object Object]"===o||"[object Array]"===o?x.copy(s):s:a[r]="[object Object]"===o||"[object Array]"===o?x.copy(s):s}n&&a.push(n)}else e.forEach(function(e,i){var n=t.call(e);"[object Object]"===o?a[i]="[object Object]"===n||"[object Array]"===n?x.copy(s):s:"[object Object]"===n||"[object Array]"===n?a.push(x.copy(s)):a.push(s)})}),a);if("[object Object]"!=(s=t.call(a))&&"[object Array]"!=s)return a;if("[object Object]"===s){var i={};for(var n in a){var r=a[n],s=t.call(r);i[n]="[object Object]"===s||"[object Array]"===s?x.copy(r):r}}else{i=[];a.forEach(function(e){var a=t.call(e);"[object Object]"===a||"[object Array]"===a?i.push(x.copy(e)):i.push(e)})}return i},saveAsImage:function(e,t){for(var a=this,i=0,n=[],r=null,s=e.length,o=a.tab.getActive(),l=a.createImageCanvas,c=function(t){var i=t.shift();if(!i)return function(){var t=l.toDataURL(),i=a.tab.getPage(o.id);l.width=l.width;var s={type:"image",data:[t,0,0],width:0,height:0,status:1,origin:!0,from:"auto"};i&&(s.pageNumber=i.getPageNumber()),r&&e.push(r),e.push(s),[].push.apply(e,n),a.tab.saveData.call(a)}();"file"===i.type?(r=i,c(t)):x.render.call(a,i,function(){c(t)},!0)};s--;){var d=e.pop();if(n.unshift(d),d.origin&&i++,a.params.saveImgStep<=i){l.width=l.width,e.length?c(e):[].push.apply(e,n);break}}},trim:function(e){if(e&&"[object String]"==t.call(e))return e.replace(/^\s*|\s*$/,"")},splitPage:function(e){var a={},i=[],n=[];for(var r in e.forEach(function(e){"[object String]"===t.call(e)?n.push(e):(a[e.pageNumber]=a[e.pageNumber]||[],a[e.pageNumber].push(e))}),a)i.push(r);return i.sort(),i.forEach(function(e){n.push(a[e])}),n},renderPen:function(e,t,a){var i=this,n=a?i.createImageCanvas:0===e.status?i.bufferCanvas:i.mainCanvas,r=e.data,s=i.params.width/e.width,o=i.params.height/e.height,l=n.getContext("2d");0===e.status?n.width=n.width:i.bufferCanvas.width=i.bufferCanvas.width,l.strokeStyle=e.color,l.lineWidth=1,l.save(),l.scale(s,o),r.forEach(function(e,t){0===t?(l.beginPath(),l.moveTo(e.x,e.y)):l.lineTo(e.x,e.y)}),l.stroke(),l.restore(),t&&t()},renderRect:function(e,t,a){var i=this,n=(e.mode,a?i.createImageCanvas:0===e.status?i.bufferCanvas:i.mainCanvas),r=e.data,s=i.params.width/e.width,o=i.params.height/e.height,l=n.getContext("2d");0===e.status?n.width=n.width:i.bufferCanvas.width=i.bufferCanvas.width,l.save(),l.scale(s,o),l.beginPath(),0===e.mode?(l.strokeStyle=e.color,l.lineWidth=1,l.strokeRect(r[0],r[1],r[2],r[3])):(l.fillStyle=e.color,l.fillRect(r[0],r[1],r[2],r[3])),l.restore(),t&&t()},renderLine:function(e,t,a){var i=this,n=e.mode,r=a?i.createImageCanvas:0===e.status?i.bufferCanvas:i.mainCanvas,s=e.data,o=i.params.width/e.width,l=i.params.height/e.height,c=r.getContext("2d");if(0===e.status?r.width=r.width:i.bufferCanvas.width=i.bufferCanvas.width,c.strokeStyle=e.color,c.lineWidth=1,c.save(),c.scale(o,l),c.beginPath(),c.moveTo(s[0],s[1]),c.lineTo(s[2],s[3]),1===n){var d=180*Math.atan2(s[1]-s[3],s[0]-s[2])/Math.PI,u=(d+30)*Math.PI/180,h=(d-30)*Math.PI/180,f=15*Math.cos(u),p=15*Math.sin(u),m=15*Math.cos(h),v=15*Math.sin(h);c.moveTo(f+s[2],p+s[3]),c.lineTo(s[2],s[3]),c.moveTo(m+s[2],v+s[3]),c.lineTo(s[2],s[3])}c.stroke(),c.restore(),t&&t()},renderRound:function(e,t,a){var i=this,n=e.mode,r=a?i.createImageCanvas:0===e.status?i.bufferCanvas:i.mainCanvas,s=e.data,o=i.params.width/e.width,l=i.params.height/e.height,c=r.getContext("2d");switch(0===e.status?r.width=r.width:i.bufferCanvas.width=i.bufferCanvas.width,c.save(),c.scale(o,l),c.beginPath(),n){case 0:c.strokeStyle=e.color,c.lineWidth=1,c.arc(s[0],s[1],s[2],0,2*Math.PI),c.stroke();break;case 1:c.fillStyle=e.color,c.arc(s[0],s[1],s[2],0,2*Math.PI),c.fill();break;case 2:c.strokeStyle=e.color,c.lineWidth=1;var d=s[2]>s[3]?s[2]:s[3],u=s[2]/d,h=s[3]/d;c.scale(u,h),c.arc(s[0]/u,s[1]/h,d,0,2*Math.PI),c.closePath(),c.stroke();break;case 3:c.fillStyle=e.color;d=s[2]>s[3]?s[2]:s[3],u=s[2]/d,h=s[3]/d;c.scale(u,h),c.arc(s[0]/u,s[1]/h,d,0,2*Math.PI),c.closePath(),c.fill()}c.restore(),t&&t()},renderText:function(e,t,a){var i=this,n=a?i.createImageCanvas:0===e.status?i.bufferCanvas:i.mainCanvas,r=e.data,s=i.params.width/e.width,o=i.params.height/e.height,l=n.getContext("2d");0===e.status?n.width=n.width:i.bufferCanvas.width=i.bufferCanvas.width,l.fillStyle=e.color,l.font=e.size+"px sans-serif",l.save(),l.scale(s,o),l.beginPath(),l.fillText(r[2],r[0],r[1]),l.restore(),t&&t()},renderImage:function(e,t,a){var i=this,n=a?i.createImageCanvas:0===e.status?i.bufferCanvas:"file"===e.type?i.fileCanvas:i.mainCanvas,r=e.data,s=new Image,o=n.getContext("2d");s.setAttribute("crossOrigin","anonymous"),s.src=r[0];var l=n.clientWidth,c=n.clientHeight;s.onload=function(){var a=s.width,d=s.height,u=l-a,h=c-d;if(o.save(),u>=0&&h>=0){var f=u/2,p=h/2;o.drawImage(s,f,p),e.fileWidth=a,e.fileHeight=d,r[1]=f,r[2]=p}else if(e.original){f=(u=(l=l>a?l:a)-a)/2,p=(h=(c=c>d?c:d)-d)/2;n.width=l,n.height=c,e.fileWidth=a,e.fileHeight=d,r[1]=f,r[2]=p,i.tab.resizePad(l,c),o.drawImage(s,f,p)}else{var m=l/c,v=s.width/s.height;m>v?(o.drawImage(s,(l-c*v)/2,0,c*v,c),e.fileWidth=c*v,e.fileHeight=c,r[1]=(l-c*v)/2,r[2]=0):(o.drawImage(s,0,(c-l/v)/2,l,l/v),e.fileWidth=l,e.fileHeight=l/v,r[1]=0,r[2]=(c-l/v)/2)}o.restore(),t&&t()}},delete:function(e,t,a){var i=this,n=a?i.createImageCanvas:0===e.status?i.bufferCanvas:i.mainCanvas,r=e.data,s=i.params.width/e.width,o=i.params.height/e.height,l=s<o?s:o,c=n.getContext("2d");0===e.status?n.width=n.width:i.bufferCanvas.width=i.bufferCanvas.width,r.forEach(function(t){if(0===e.mode){var a=t.size/2*Math.sin(Math.atan((t.y-t.ey)/(t.x-t.ex))),n=t.size/2*Math.cos(Math.atan((t.y-t.ey)/(t.x-t.ex))),r=t.ex+a,s=t.ey-n,o=t.ex-a,d=t.ey+n,u=t.x+a,h=t.y-n,f=t.x-a,p=t.y+n;c.save(),c.scale(l,l),c.beginPath(),c.arc(t.x,t.y,t.size/2,0,2*Math.PI),c.clip(),c.clearRect(0,0,i.params.width,i.params.height),c.restore()}else{r=t.ex-t.size/2,s=t.ey-t.size/2,o=t.ex-t.size/2,d=t.ey+t.size/2,u=t.x+t.size/2,h=t.y-t.size/2,f=t.x-t.size/2,p=t.y+t.size/2;c.save(),c.scale(l,l),c.beginPath(),c.rect(r,s,t.size,t.size),c.clip(),c.clearRect(0,0,i.params.width,i.params.height),c.restore()}c.save(),c.scale(l,l),c.beginPath(),c.moveTo(r,s),c.lineTo(o,d),c.lineTo(u,h),c.lineTo(f,p),c.closePath(),c.clip(),c.clearRect(0,0,i.params.width,i.params.height),c.restore()}),t&&t()},render:function(e,t,a){var i=this;switch(e.type){case"pen":x.renderPen.call(i,e,t,a);break;case"rectangle":x.renderRect.call(i,e,t,a);break;case"line":x.renderLine.call(i,e,t,a);break;case"round":x.renderRound.call(i,e,t,a);break;case"text":x.renderText.call(i,e,t,a);break;case"image":case"file":x.renderImage.call(i,e,t,a);break;case"eraser":x.delete.call(i,e,t,a)}}},E={eraser:function(e){var t=this.mouseIconCanvas,a=e.data,i=e.mode,n=this.params.width/e.width,r=this.params.height/e.height,s=n<r?n:r,o=t.getContext("2d");if(t.width=t.width,-1!==a[0]&&-1!==a[1])if(o.scale(s,s),o.beginPath(),0===i)o.arc(a[0],a[1],a[2]/2,0,2*Math.PI),o.stroke();else{var l=a[0]-a[2]/2,c=a[1]-a[2]/2;o.rect(l,c,a[2],a[2]),o.stroke()}},ferula:function(e){var t=this.mouseIconCanvas,a=e.data,i=this.params.ferulaSize,n=this.params.width/e.width,r=this.params.height/e.height,s=n<r?n:r,o=t.getContext("2d");t.width=t.width,-1!==a[0]&&-1!==a[1]&&(o.scale(s,s),o.beginPath(),o.fillStyle="red",o.arc(a[0],a[1],i,0,2*Math.PI),o.fill())},render:function(e){var t=e.type;E[t]&&E[t].call(this,e)}},S=function(){var e=document.createElement("UL"),a='<li class="pad-tab-item" title="@LABEL@">@LABEL@@DELETEBTN@</li>',i='<i class="iconfont icon-close"></i>';function n(n){var r=this,s={},o={},c={},d={},u=[],h=!1,f={},m=n.getElementsByClassName("pad-tab-list")[0];r.build=function(t,n,h,f,v){if(t){var g=this,b=f&&f.id?f.id:0===n?0:x.uuid,w=a.replace(/@LABEL@/g,f&&f.name?f.name:p[n]).replace(/@DELETEBTN@/g,v?i:"");e.innerHTML=w,u.push(b);var C=e.firstElementChild||e.firstChild;return s[b]=C,o[b]=h||[],c[b]=t,v&&y.addEvent(C.getElementsByTagName("i")[0],l.click,function(){var e=[].slice.call(arguments,0)[0]||window.event;window.event?(e.returnValue=!1,e.cancelBubble=!0):(e.preventDefault(),e.stopPropagation()),r.remove.call(g,b),g.params.onTabRemove&&g.params.onTabRemove(b)}),y.addEvent(C,l.click,function(){!0!==g.params.disable&&this!==d.tab&&(r.active.call(g,b),g.params.onTabChange&&g.params.onTabChange(b))}),m.appendChild(C),g.container[b]={data:o[b],type:n,splitPage:0,del:v},f&&f.name&&(g.container[b].tabName=f.name),b}},r.push=function(e,t){var a=this,i=0;o[e]||(o[e]=[]),o[e].push(t),a.tab.saveData.call(a),o[e].forEach(function(e){"auto"!=e.from&&i++}),i-a.params.saveImgStep>=a.params.saveImgStep&&x.saveAsImage.call(a,o[e],a.container[e].type)},r.saveData=function(){var e=this;if(!h&&"never"!==e.params.autoSaveTime){e.params.autoSaveTime=isNaN(e.params.autoSaveTime)?10:+e.params.autoSaveTime;var t=setTimeout(function(){for(var a in f){var i=f[a];o[a].length=0,[].push.apply(o[a],i.getData())}window.localStorage.setItem(e.id+"_pad",JSON.stringify(e.container)),clearTimeout(t),h=!1},1e3*e.params.autoSaveTime);h=!0}},r.remove=function(e){var t=this,a=s[e],i=u.indexOf(e);delete s[e],delete o[e],delete c[e],delete t.container[e],f[e]&&(f[e].hide(),delete f[e]),m.removeChild(a),u.splice(i,1),e=u[i-1>=0?i-1:0],t.tab.active.call(t,e),window.localStorage.setItem(t.id+"_pad",JSON.stringify(t.container))},r.active=function(e){var t=this,a=o[e];if(y.removeClass(d.tab,"active"),t.tab.resizePad(),d.page&&(d.page.hide(),delete d.page),t.container[e].type!=d.type&&(y.css(d.canvas||t.mainCanvas,"background"),y.css(c[e],"background",t.params.background)),d.tab=s[e],d.data=o[e],d.canvas=c[e],d.id=e,d.type=t.container[e].type,d.page=f[e],y.addClass(d.tab,"active"),d.page&&d.page.show(),a&&!d.page){d.canvas.width=d.canvas.width;var i=0,n=a.length;if(n){var r=function(){var e=a[i];e&&x.render.call(t,e,function(){++i<n&&r()})};r()}}},r.getActive=function(){return d},r.getTab=function(e){return s[e]},r.clear=function(e){var a=this;if(void 0===e)d.page?d.page.clear.call(a):(d.data.length=0,d.canvas.width=d.canvas.width,"[object Function]"===t.call(a.params.onClear)&&a.params.onClear({tabId:d.id}));else{var i=e.tabId;f[i]?f[i].clear.call(a,e):(o[i]&&(o[i].length=0),c[i]&&(c[i].width=c[i].width))}window.localStorage.setItem(a.id+"_pad",JSON.stringify(a.container))},r.cleanCache=function(){window.localStorage.removeItem(this.id+"_pad")},r.setPage=function(e,t){f[e]=t,this.container[e].splitPage=1},r.getPage=function(e){return f[e]},r.render=function(e,a){x.render.call(this,e,function(){if("[object Function]"===t.call(a)){var i=x.copy(e),n={};n[d.id]={data:i,type:d.type,splitPage:d.page?1:0},a(n)}}),e.status&&this.tab.push.call(this,d.id,e)}}return n.prototype={constructor:n},n}();function j(e){if(!this instanceof j)return new j(e);var a=this,i=1,n=e.that,r=x.splitPage(e.data),s=r.length,o=e.tabId,c=e.show||!1,d=document.createElement("DIV"),u=n.params.wrap.getElementsByClassName("split-page-wrap")[0];d.innerHTML=b.replace(/@TOTAL@/g,s);var h=d.removeChild(d.firstElementChild||d.firstChild),f=h.getElementsByClassName("pre-page-btn")[0],p=h.getElementsByClassName("next-page-btn")[0],m=h.getElementsByClassName("go-page-btn")[0],v=h.getElementsByClassName("page-number-input")[0];y.addEvent(f,l.click,function(){n.params.disable||i<=1||a.pre()}),y.addEvent(p,l.click,function(){n.params.disable||i>=s||a.next()}),y.addEvent(m,l.click,function(){if(!n.params.disable){var e=v.value;a.go(e,function(){n.params.onPageTurn&&n.params.onPageTurn(o,e,r[e-1][0])})}}),y.addEvent(v,"input",function(){/^\s*([0-9]+).*\s*$/.test(this.value)?this.value=RegExp.$1:this.value=i}),this.pre=function(){i--,this.go(i,function(){n.params.onPageTurn&&n.params.onPageTurn(o,i,r[i-1][0])})};var g=function(e,a,i){var s=r[e-1];"[object Array]"===t.call(s)?s.some(function(t,r){if(!(r<a)){var o=!1;return"file"===t.type?(o=!0,x.render.call(n,t,function(){s.length-1<=r?i&&i():g(e,++r,i)})):(x.render.call(n,t),s.length-1<=r&&i&&i()),o}}):x.render.call(n,s,i)};this.go=function(e,a){switch(e=(e=e<=1?1:e)>=s?s:e,n.mainCanvas.width=n.mainCanvas.width,g(e,0,function(){"[object Function]"===t.call(a)&&a()}),i=e,v.value=e,!0){case i<=1&&i<s:y.addClass(f,"no"),y.removeClass(p,"no");break;case i>1&&i>=s:y.removeClass(f,"no"),y.addClass(p,"no");break;default:y.removeClass(f,"no"),y.removeClass(p,"no")}},this.next=function(){i++,this.go(i,function(){n.params.onPageTurn&&n.params.onPageTurn(o,i,r[i-1][0])})},this.show=function(){u.innerHTML="",r.length>1&&u.appendChild(h),n.page=a,this.go(i)},this.hide=function(){n.page==a&&(r.length>1&&u.removeChild(h),delete n.page)},this.getPageNumber=function(){return i},this.empower=function(){v.removeAttribute("readonly")},this.disable=function(){v.setAttribute("readonly","readonly")},r.forEach(function(a,i){"[object String]"===t.call(a)&&(r[i]=[{data:[a,0,0],pageNumber:i+1,width:n.params.width,height:n.params.height,status:1,type:"file",from:e.from,original:e.original}])}),this.push=function(e,t){var a=n.tab.getActive(),s=0;e.pageNumber=void 0!=t?t:i,r[e.pageNumber-1].push(e),n.tab.saveData.call(n),r[e.pageNumber-1].forEach(function(e){"file"!=e.type&&"auto"!=e.from&&s++}),s-n.params.saveImgStep>=n.params.saveImgStep&&x.saveAsImage.call(n,r[e.pageNumber-1],n.container[a.id].type)},this.getData=function(){for(var e=0,t=[];e<s;)[].push.apply(t,r[e]),e++;return t},this.clear=function(e){var a=(e?e.pageNumber:i)||i;r[a-1].length=1,n.tab.saveData.call(n),(void 0===e||e.tabId===n.tab.getActive().id&&e.pageNumber===i)&&(n.mainCanvas.width=n.mainCanvas.width,g(a,0,function(){void 0===e&&"[object Function]"===t.call(n.params.onClear)&&n.params.onClear({tabId:n.tab.getActive().id,pageNumber:a})}))},this.render=function(e,a){var n=this;x.render.call(n,e,function(){if("[object Function]"===t.call(a)){var r=x.copy(e),s={},o=n.tab.getActive();s[o.id]={data:r,type:o.type,pageNumber:i,splitPage:o.page?1:0},a(s)}}),e.status&&n.page.push.call(n,e)},n.params.disable&&this.disable(),n.tab.saveData.call(n),c&&(u.innerHTML="",r.length>1&&u.appendChild(h),e.from===n.params.id&&a.go(1))}function N(i){if(!this instanceof N)return new N(i);var r={pad:this,params:i,waitList:[],container:{},id:i.id||n++,render:function(e){r.page?r.page.render.call(r,e,function(e){"[object Function]"===t.call(i.onRender)&&i.onRender(e)}):r.tab.render.call(r,e,function(e){"[object Function]"===t.call(i.onRender)&&i.onRender(e)})},mouseRender:function(e){if(E.render.call(r,e),e.width=r.params.width,e.height=r.params.height,i.onMousemove){var t=x.copy(e),a={},n=r.tab.getActive();a[n.id]={data:t,type:n.type},i.onMousemove(a)}}};(function(){var i=this,n=this.params,r=n.wrap,o=n.toolbars,d={},p=!1,b=null,E=null,N=null,T=new FileReader,O=!1,B="",I=!1,L=r.requestFullscreen||r.webkitRequestFullscreen||r.mozRequestFullScreen||r.msRequestFullscreen,k=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen,A=null,P=null,R=null,M=null,z=null,D=null,H=null,W=null;o.forEach(function(t){var a=u[t];switch(t){case"handPad":case"color":case"clear":case"export":break;default:a?a.forEach(function(a){d[a]=new e.module[t]({name:a})}):d[t]=new e.module[t]({name:t})}var i=v.replace(/@ITEM@/g,a?a[0]:t).replace(/@ICONCLASS@/g,a?f[a[0]]:f[t]).replace(/@TITLE@/g,a?h[a[0]]:h[t]).replace(/@LEVEL@/g,0);if(i=i.replace(/@CHILDTOOLBARS@/g,a?g:""),a){var n="";a.forEach(function(e){n+=v.replace(/@ITEM@/g,e).replace(/@ICONCLASS@/g,f[e]).replace(/@TITLE@/g,h[e]).replace(/@CHILDTOOLBARS@/g,"").replace(/@LEVEL@/g,1)}),i=i.replace(/@CHILDTOOLBARITEM@/g,n)}B+=i}),0!=n.fullScreen&&(B+=w);var F=m.replace(/@LAYOUT@/g,c[n.layout]+(n.vertical?" vertical":"")).replace(/@TOOLBARS@/g,B).replace(/@DISABLED@/g,n.disable?"disabled":""),U=n.data||JSON.parse(window.localStorage.getItem(i.id+"_pad"));r.innerHTML=F,this.toolbarMap=d;var q=r.getElementsByClassName("can-wrap")[0],V=r.getElementsByClassName("toolbar-list")[0],Y=V.getElementsByClassName("full-screen-btn")[0];A=r.getElementsByClassName("color-input")[0],P=r.getElementsByClassName("file-input")[0],R=r.getElementsByClassName("text-input")[0],M=r.getElementsByClassName("main-can")[0],z=r.getElementsByClassName("buffer-can-1")[0],D=r.getElementsByClassName("buffer-can-2")[0],H=r.getElementsByClassName("buffer-can-3")[0],W=r.getElementsByClassName("buffer-can-4")[0];var X=function(){var e=q.clientWidth,t=q.clientHeight;if(n.size){if(/^(\s*\d+\s*)\*(\s*\d+\s*)$/.test(n.size)){var a=n.size.split(/\*/);e=+a[0],t=+a[1]}if(/^(\s*\d+\s*):(\s*\d+\s*)$/.test(n.size)){var i=n.size.split(/\:/),r=q.clientWidth,s=q.clientHeight;switch(!0){case i[0]/i[1]>r/s:e=s/i[1]*i[0],t=s;break;case i[0]/i[1]<r/s:e=r,t=r/i[0]*i[1];break;default:e=r,t=s}}}n.width=e,n.height=t};y.addEvent(q,l.wheel,function(){var e=[].slice.call(arguments,0),t=e[0]||window.event;if(window.event?(t.returnValue=!1,t.cancelBubble=!0):(t.preventDefault(),t.stopPropagation()),!0!==i.params.disable){var a={type:"y",distance:("DOMMouseScroll"===t.type?3===t.detail?100:-100:t.deltaY)/10,from:n.id,width:n.width,height:n.height};K.scroll(a)}});var $=q.clientWidth,_=q.clientHeight;y.addEvent(window,"resize",function(){var e=q.clientWidth,t=q.clientHeight;e==$&&t==_||(X(),J(),i.tab.active.call(i,i.tab.getActive().id),$=e,_=t)});var J=function(e,t){var a=e||n.width,i=t||n.height;M.width=a,M.height=i,z.width=a,z.height=i,D.width=a,D.height=i,H.width=a,H.height=i,W.width=a,W.height=i,K&&K.resize()};i.tab=new S(n.wrap),i.textInput=R,i.mouseIconCanvas=z,i.createImageCanvas=H,i.fileCanvas=W,i.mainCanvas=M,X(),J();var K=C.init({node:q,config:n});K.disable=n.disable,K.resize(),Object.defineProperty(i.tab,"resizePad",{value:J}),y.addEvent(A,"change",function(){i.params.color=this.value});var G=function(e){s?e?y.addClass(r,"pad-full-screen"):y.removeClass(r,"pad-full-screen"):e?L.call(r.getElementsByClassName("pad-wrap")[0]):k.call(document),I=e,y.removeClass(Y,I?"icon-enlarge":"icon-narrow"),y.addClass(Y,I?"icon-narrow":"icon-enlarge"),J(),i.tab.active.call(i,i.tab.getActive().id)};i.pad.resize=function(e,t){isNaN(e)||isNaN(t)?J():J(e,t),i.tab.active.call(i,i.tab.getActive().id)},i.pad.scroll=function(e){K.scroll(e)},i.pad.fullScreen=function(){I||G(!0)},i.pad.exitFullScreen=function(){I&&G(!1)},i.pad.showFiles=function(e){var a=e.files,n=e.newTab,r=e.isShow,s=void 0!=e.from?e.from:i.params.id,o=e.tabId,l=e.tabName,c=i.tab.getActive();a="[object Array]"===t.call(a)?a:[a];var d=function(){var o=new j({data:a,show:r,that:i,from:s,tabId:n?h:c.id,original:e.original||!1});i.tab.setPage.call(i,void 0!=h?h:c.id,o),c.page=o,i.params.id===s&&"[object Function]"===t.call(i.params.onShowFiles)&&(e.from=s,i.params.onShowFiles(e))};if(n){var u={id:o,name:l},h=i.tab.build.call(i,W,1,null,u,s===i.params.id);e.tabId=h,r&&(i.tab.active.call(i,h),d(),s===i.params.id&&i.params.onTabChange&&i.params.onTabChange(h))}else i.pad.clear(),d()},T.onload=function(e){i.toolbarMap.image.renderBuffer.call(i,e.target.result),i.toolbarMap.image.render.call(i,[0,0]),P.value=""},y.addEvent(P,"change",function(){T.readAsDataURL(this.files[0])}),y.addEvent(R,"input",function(){this.style.width=this.scrollWidth+"px"}),y.addEvent(R,"keyup",function(){var e=[].slice.call(arguments,0),t=e[0]||window.event;if(13===t.which){var a=x.trim(this.value);b.render.call(i,a)}}),y.addEvent(document,"keydown",function(){var e=[].slice.call(arguments,0),t=e[0]||window.event,a=t.which;if(i.active)switch(!0){case 107===a||187===a&&t.shiftKey:b&&b.largen&&b.largen.call(i);break;case 109===a||189===a&&t.shiftKey:b&&b.lesser&&b.lesser.call(i)}}),y.addEvent(V,l.click,function(){if(!n.disable){var e=[].slice.call(arguments,0),t=e[0]||window.event,r=t.srcElement||t.target,s=+r.getAttribute("level"),o=r.getAttribute("item");if(o){switch(b&&b.destory.call(i),o){case"handPad":(p=!p)?r.setAttribute("active",""):r.removeAttribute("active");break;case"color":A.click();break;case"clear":i.tab.clear.call(i);break;case"export":!function(){var e=x.uuid,t=i.mainCanvas.toDataURL(),n=document.createElement("A"),r=t.split(","),s=atob(r[1]),o=s.length,l=new Uint8Array(o);for(;o--;)l[o]=s.charCodeAt(o);var c=a.createObjectURL(new Blob([l],{mime:"image/octet-stream;Content-Disposition:attachment"}));n.href=c,n.download=e+".png",n.click(),a.revokeObjectURL(c)}();break;case"image":P.click();break;case"fullScreen":G(!I);break;default:if(!(b=d[o]||b))return;if(i.current=b,b.active(),0===s){E&&E.removeAttribute("active"),E=r;var l=V.getElementsByClassName("selected-item")[0];r.parentNode!=l&&y.removeClass(l,"selected-item"),y.addClass(r.parentNode,"selected-item")}if(1===s){N&&N.removeAttribute("active");var c=y.preNode(r.parentNode.parentNode);c.title=r.parentNode.title,c.className=c.className.replace(/\bicon-[\w-]+\b/,r.className.match(/\bicon-[\w-]+\b/)),c.setAttribute("item",o),N=r}r.setAttribute("active","")}o&&(window.event?(t.returnValue=!1,t.cancelBubble=!0):(t.preventDefault(),t.stopPropagation()))}}}),y.addEvent(V,"mousedown",function(){var e=[].slice.call(arguments,0),t=e[0]||window.event;window.event?(t.returnValue=!1,t.cancelBubble=!0):(t.preventDefault(),t.stopPropagation())});var Q=0,Z=0;if(y.addEvent(z,l.move,function(){var e=[].slice.call(arguments,0)[0]||window.event;if(!(s&&e.targetTouches.length>1)){var t=this.getBoundingClientRect(),a=s?e.targetTouches[0].clientX:e.clientX,r=s?e.targetTouches[0].clientY:e.clientY,o={x:a-(t.x||t.left),y:r-(t.y||t.top)};if(b){var l=b.name.toLowerCase();if(p||O)switch(l){case"ferula":b.mouseRender.call(i,o);break;case"circular":case"quadrate":b.mouseRender.call(i,o);default:b.bufferRender.call(i,o)}else b.mouseRender&&b.mouseRender.call(i,o)}else if(O){if(!0===i.params.disable)return;var c=Q-a,d=Z-r;K.scroll({type:"x",distance:c,from:n.id,width:n.width,height:n.height}),K.scroll({type:"y",distance:d,from:n.id,width:n.width,height:n.height}),Q=a,Z=r}window.event?(e.returnValue=!1,e.cancelBubble=!0):(e.preventDefault(),e.stopPropagation())}}),y.addEvent(z,l.down,function(){var e=[].slice.call(arguments,0)[0]||window.event,t=this.getBoundingClientRect(),a=V.getElementsByClassName("selected-item")[0],n={x:(s?e.targetTouches[0].clientX:e.clientX)-(t.x||t.left),y:(s?e.targetTouches[0].clientY:e.clientY)-(t.y||t.top)};window.event?(e.returnValue=!1,e.cancelBubble=!0):(e.preventDefault(),e.stopPropagation()),Q=s?e.targetTouches[0].clientX:e.clientX,Z=s?e.targetTouches[0].clientY:e.clientY,O=!0,b&&(y.removeClass(a,"selected-item"),b&&b.destory.call(i),b.bufferRender&&b.bufferRender.call(i,n,!0))}),y.addEvent(document,l.down,function(){var e=V.getElementsByClassName("selected-item")[0];y.removeClass(e,"selected-item"),b&&b.destory.call(i)}),y.addEvent(document,"mouseup",function(){O&&(O=!1,b&&b.render&&b.render.call(i))}),y.addEvent(z,l.up,function(){[].slice.call(arguments,0)[0]||window.event,O=!1,b&&b.render&&b.render.call(i)}),y.addEvent(q,"mouseleave",function(){b&&b.destory.call(i)}),i.bufferCanvas=D,U)for(var ee in U){var te=U[ee],ae=i.tab.build.call(i,0===te.type?M:W,te.type,te.data,{id:ee,name:te.tabName},te.del);if(te.splitPage){var ie=new j({data:te.data,show:0===te.type,that:i,tabId:ae});i.tab.setPage.call(i,ae,ie)}0===te.type&&i.tab.active.call(i,ae)}else{var ae=i.tab.build.call(i,M,0);i.tab.active.call(i,ae)}}).call(r);var o=function(e){var t=r.tab.getActive();for(var a in e){var i=e[a],n=(i.type,i.data);if(a==t.id)t.page?t.page.getPageNumber()===i.pageNumber?r.page.render.call(r,n):n.status&&r.page.push.call(r,n,+i.pageNumber):r.tab.render.call(r,n);else if(r.tab.getTab(a)){if(n.status){var s=r.tab.getPage(a);s?s.push.call(r,n,+i.pageNumber):r.tab.push.call(r,a,n)}}else r.tab.build.call(r,r.fileCanvas,1,[n],{id:a},!1)}};this.render=function(e){"[object Object]"==t.call(e)?o(e):console.error("TypeError: data must be Object")},this.renderAll=function(e){"[object Object]"==t.call(e)?e.forEach(function(e){o(e)}):console.error("TypeError: data must be Array")},this.mouseCtrl=function(e){"[object Object]"==t.call(e)?function(e){for(var t in e){(a=e[t]).type;var a=a.data;E.render.call(r,a)}}(e):console.error("TypeError: data must be Object")},this.clear=function(e){r.tab.clear.call(r,e)},this.disable=function(){y.addClass(i.wrap.firstElementChild||i.wrap.firstChild,"disabled"),i.disable=!0},this.enable=function(){y.removeClass(i.wrap.firstElementChild||i.wrap.firstChild,"disabled"),i.disable=!1},this.createImage=function(){return r.mainCanvas.toDataURL()},this.changeTab=function(e){r.tab.active.call(r,e)},this.turnPage=function(e,t){e===r.tab.getActive().id&&r.tab.getPage.call(r,e).go(t)},this.removeTab=function(e){void 0!==e&&r.tab.remove.call(r,e)},y.addEvent(i.wrap,"mouseenter",function(){r.active=!0}),y.addEvent(i.wrap,"mouseleave",function(){r.active=!1})}j.prototype={constructor:j},window.wPad={init:function(e){var t=x.copy({},d),a=new N(t=x.copy(t,e));return void 0!=t.id&&(i[t.id]=a),r.push(a),a},getPadById:function(e){if(void 0!==e)return i[e]},getPadByIndex:function(e){if(void 0!==e)return r[e]}}}()},{}],5:[function(e,t,a){!function(){"use strict";var e={line:0,arrow:1};function t(e){this.name=e.name||"Line",this.interimBuffer=[],this.points=[],this.buffer=[]}t.prototype={constructor:t,active:function(){},bufferRender:function(t,a){var i=this;a?(i.current.points=[],i.current.points.push(t.x),i.current.points.push(t.y)):(i.current.points[2]=t.x,i.current.points[3]=t.y),a||(i.current.interimBuffer.pop(),t={type:"line",data:t=[].concat.apply([],i.current.points),status:0,mode:e[i.current.name],origin:!0,color:i.params.color,from:i.params.id,width:i.params.width,height:i.params.height},i.current.interimBuffer.push(t),i.render(t))},render:function(){var e=this.current.interimBuffer.shift();if(e)do{e.status=1,this.current.buffer.push(e),this.render(e),e=this.current.interimBuffer.shift()}while(e)},destory:function(){}};var a=window.vm||{};a.module=a.module||{},a.module.line=t,window.vm=a}()},{}],6:[function(e,t,a){!function(){"use strict";function e(e){this.name=e.name||"Pen",this.interimBuffer=[],this.buffer=[]}e.prototype={constructor:e,active:function(){},bufferRender:function(e,t){var a=this,i=t?{type:"pen",data:[],status:0,origin:!!t,color:a.params.color,from:a.params.id,width:a.params.width,height:a.params.height}:a.current.interimBuffer.pop();i.data.push(e),a.current.interimBuffer.push(i),a.render(i)},render:function(){var e=this.current.interimBuffer.shift();if(e)do{e.status=1,this.current.buffer.push(e),this.render(e),e=this.current.interimBuffer.shift()}while(e)},destory:function(){}};var t=window.vm||{};t.module=t.module||{},t.module.pen=e,window.vm=t}()},{}],7:[function(e,t,a){!function(){"use strict";var e={rectstroke:0,rect:1};function t(e){this.name=e.name||"Rectangle",this.interimBuffer=[],this.points=[],this.buffer=[]}t.prototype={constructor:t,active:function(){},bufferRender:function(t,a){var i=this;a?(i.current.points=[],i.current.points.push(t.x),i.current.points.push(t.y)):(i.current.points[2]=t.x-(i.current.points[0]||0),i.current.points[3]=t.y-(i.current.points[1]||0),i.current.interimBuffer.pop(),t={type:"rectangle",data:t=[].concat.apply([],i.current.points),status:0,mode:e[i.current.name],origin:!0,color:i.params.color,from:i.params.id,width:i.params.width,height:i.params.height},i.current.interimBuffer.push(t),i.render(t))},render:function(){var e=this.current.interimBuffer.shift();if(e)do{e.status=1,this.current.buffer.push(e),this.render(e),e=this.current.interimBuffer.shift()}while(e)},destory:function(){}};var a=window.vm||{};a.module=a.module||{},a.module.rectangle=t,window.vm=a}()},{}],8:[function(e,t,a){!function(){"use strict";var e={circle:0,roundel:1,ellipesstroke:2,ellipes:3};function t(e){this.name=e.name||"Round",this.interimBuffer=[],this.points=[],this.buffer=[]}t.prototype={constructor:t,active:function(){},bufferRender:function(t,a){var i=this;if(a)i.current.points=[],i.current.points.push(t.x),i.current.points.push(t.y);else{var n=[],r=i.current.points[0],s=i.current.points[1],o=e[i.current.name],l=t.x-r,c=t.y-s;n.push((r+t.x)/2),n.push((s+t.y)/2),0===o||1===o?n.push(Math.abs(l)>Math.abs(c)?Math.abs(l)/2:Math.abs(c)/2):(n.push(Math.abs(l)/2),n.push(Math.abs(c)/2)),i.current.interimBuffer.pop(),t={type:"round",data:n,status:0,mode:o,origin:!0,color:i.params.color,from:i.params.id,width:i.params.width,height:i.params.height},i.current.interimBuffer.push(t),i.render(t)}},render:function(){var e=this.current.interimBuffer.shift();if(e)do{e.status=1,this.current.buffer.push(e),this.render(e),e=this.current.interimBuffer.shift()}while(e)},destory:function(){}};var a=window.vm||{};a.module=a.module||{},a.module.round=t,window.vm=a}()},{}],9:[function(e,t,a){!function(){"use strict";function e(e){this.name=e.name||"Text",this.interimBuffer=[],this.points=[],this.buffer=[]}e.prototype={constructor:e,active:function(){},bufferRender:function(e,t){var a=this;console.log("text"),t&&(a.current.points=[],a.current.points.push(e.x),a.current.points.push(e.y),a.textInput.style.cssText="visibility: visible; z-index: 101; font-size: "+a.params.fontSize+"; left: "+e.x+"px; top: "+(e.y-a.textInput.offsetHeight/2-8)+"px",a.textInput.focus(),e={type:"text",data:[e.x,e.y],status:0,origin:!!t,color:a.params.color,size:a.params.fontSize,from:a.params.id,width:a.params.width,height:a.params.height},a.current.interimBuffer.push(e))},render:function(e){if("[object String]"==Object.prototype.toString.call(e)&&(e=e.replace(/^\s*|\s*$/,""))){var t=this,a=t.current.interimBuffer.pop();a&&(a.data.push(e),t.textInput.value="",t.textInput.removeAttribute("style"),a.status=1,t.current.buffer.push(a),t.render(a),t.current.interimBuffer.length=0)}},destory:function(){var e=this,t=e.textInput.value.replace(/^\s*|\s*$/,"");t&&e.current.render.call(e,t),e.textInput.value="",e.textInput.removeAttribute("style")}};var t=window.vm||{};t.module=t.module||{},t.module.text=e,window.vm=t}()},{}]},{},[1,2,3,5,6,7,8,9,4]);
//# sourceMappingURL=index.min.js.map
